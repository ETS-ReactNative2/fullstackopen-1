(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t.n(o),r=t(15),a=t.n(r),u=(t(20),t(3)),s=t(4),i=t.n(s),l="/api/persons",d={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){var n=i.a.delete("".concat(l,"/").concat(e));return console.log("urdDelete",l,e),n.then((function(e){return e}))}},f=t(0),h=function(e){var n=e.message;if(null===n)return null;if(""===n.content&&""===n.status)return null;var t={color:"success"===n.status?"green":"red",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(f.jsx)("div",{style:t,children:n.content})},b=function(e){var n=e.filter,t=e.handle;return Object(f.jsxs)("div",{children:[" filter persons",Object(f.jsx)("input",{name:"filter",value:n,onChange:t})]})},j=function(e){var n=e.persons,t=e.name,o=e.number,c=e.handlePerson,r=e.handlePhone,a=e.handleSetPersons,u=e.handleSetName,s=e.handleSetNumber,i=e.handleNotif,l=function(e){i(e),setTimeout((function(){i(null)}),3e3)};return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.filter((function(e){return e.name===t}));1===c.length?c.some((function(e){return e.name===t}))&&c.some((function(e){return e.number!==o}))&&window.confirm("".concat(t," is already added is already added to phonebook, replace the old number with a new one?"))&&d.update(c[0].id,{name:t,number:o}).then((function(e){a(n.map((function(n){return n.id!==e.id?n:e}))),console.log("success"),l({status:"success",content:"Added ".concat(t)}),u(),s()})).catch((function(e){console.log("fail"),l({status:"fail",content:"Information of ".concat(t," has already been removed from server")})})):(console.log("Object not found."),d.create({name:t,number:o}).then((function(e){a(n.concat(e)),console.log("success"),l({status:"success",content:"Added ".concat(t)}),u(),s()})))},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{name:"name",value:t,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{name:"number",value:o,onChange:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.persons,t=e.filter,o=e.handleNotif,c=e.handleSetPersons,r=function(e){o(e),setTimeout((function(){o(null)}),3e3)};if(void 0!==n)return Object(f.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(f.jsxs)("li",{children:[" ",e.name," ",e.number,Object(f.jsx)("button",{type:"button",onClick:function(){return n=e.id,t=e.name,void(window.confirm("Delete ".concat(t," ?"))&&d.del(n).then((function(e){c(),r({status:"success",content:"Deleting of ".concat(t)})})).catch((function(e){c(),r({status:"success",content:"Error impossible Deleting of ".concat(t)})})));var n,t},children:"delete"})]},e.name.toString())}))})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),a=Object(u.a)(r,2),s=a[0],i=a[1],l=Object(o.useState)(""),g=Object(u.a)(l,2),p=g[0],O=g[1],v=Object(o.useState)(""),x=Object(u.a)(v,2),S=x[0],P=x[1],w=Object(o.useState)(null),y=Object(u.a)(w,2),C=y[0],N=y[1];Object(o.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{message:C}),Object(f.jsx)(b,{filter:S,handle:function(e){"filter"===e.target.name&&P(e.target.value),console.log(e.target.name,e.target.value)}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(j,{persons:t,name:s,number:p,handlePerson:function(e){"name"===e.target.name&&i(e.target.value),console.log(e.target.name,e.target.value)},handlePhone:function(e){"number"===e.target.name&&O(e.target.value),console.log(e.target.name,e.target.value)},handleSetPersons:c,handleSetName:function(){return i("")},handleSetNumber:function(){return O("")},handleNotif:N}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(m,{persons:t,filter:S,handleNotif:N,handleSetPersons:function(){return d.getAll().then((function(e){c(e)}))}})]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),o(e),c(e),r(e),a(e)}))};a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),p()}},[[41,1,2]]]);
//# sourceMappingURL=main.5d24d061.chunk.js.map