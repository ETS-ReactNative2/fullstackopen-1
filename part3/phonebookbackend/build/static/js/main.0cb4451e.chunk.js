(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(2),o=t.n(r),c=t(15),a=t.n(c),u=(t(20),t(3)),i=t(4),s=t.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){var n=s.a.post(l,e);return console.log("Create"),n.then((function(e){return e.data})).catch((function(e){return e.response.data}))},update:function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){return e.response.data}))},del:function(e){var n=s.a.delete("".concat(l,"/").concat(e));return console.log("urdDelete",l,e),n.then((function(e){return e}))}},f=t(0),h=function(e){var n=e.message;if(null===n)return null;if(""===n.content&&""===n.status)return null;var t={color:"success"===n.status?"green":"red",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(f.jsx)("div",{style:t,children:n.content})},b=function(e){var n=e.filter,t=e.handle;return Object(f.jsxs)("div",{children:[" filter show with",Object(f.jsx)("input",{name:"filter",value:n,onChange:t})]})},j=function(e){var n=e.persons,t=e.name,r=e.number,o=e.handlePerson,c=e.handlePhone,a=e.handleSetPersons,u=e.handleSetName,i=e.handleSetNumber,s=e.handleNotif,l=function(e){s(e),setTimeout((function(){s(null)}),3e3)};return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=n.filter((function(e){return e.name===t}));1===o.length?o.some((function(e){return e.name===t}))&&window.confirm("".concat(t," is already added is already added to phonebook, replace the old number with a new one?"))&&d.update(o[0].id,{name:t,number:r}).then((function(e){a(n.map((function(n){return n.id!==e.id?n:e}))),void 0!==e.error?l({status:"fail",content:e.error}):l({status:"success",content:"Added ".concat(t)}),u(),i()})):d.create({name:t,number:r}).then((function(e){void 0!==e.error?l({status:"fail",content:e.error}):(a(n.concat(e)),console.log("success"),console.log(e),l({status:"success",content:"Added ".concat(t)}),u(),i())}))},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{name:"name",value:t,onChange:o})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{name:"number",value:r,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},m=function(e){var n=e.persons,t=e.filter,r=e.handleNotif,o=e.handleSetPersons,c=function(e){r(e),setTimeout((function(){r(null)}),3e3)};if(void 0!==n)return Object(f.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(f.jsxs)("li",{children:[" ",e.name," ",e.number,Object(f.jsx)("button",{type:"button",onClick:function(){return n=e.id,t=e.name,void(window.confirm("Delete ".concat(t," ?"))&&d.del(n).then((function(e){o(),c({status:"success",content:"Deleting of ".concat(t)})})).catch((function(e){o(),c({status:"success",content:"Error impossible Deleting of ".concat(t)})})));var n,t},children:"delete"})]},e.name.toString())}))})},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)("julien"),a=Object(u.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(Math.floor(100*Math.random())),g=Object(u.a)(l,2),p=g[0],O=g[1],v=Object(r.useState)(""),x=Object(u.a)(v,2),S=x[0],w=x[1],P=Object(r.useState)(null),C=Object(u.a)(P,2),N=C[0],k=C[1];Object(r.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{message:N}),Object(f.jsx)(b,{filter:S,handle:function(e){"filter"===e.target.name&&w(e.target.value),console.log(e.target.name,e.target.value)}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(j,{persons:t,name:i,number:p,handlePerson:function(e){"name"===e.target.name&&s(e.target.value),console.log(e.target.name,e.target.value)},handlePhone:function(e){"number"===e.target.name&&O(e.target.value),console.log(e.target.name,e.target.value)},handleSetPersons:o,handleSetName:function(){return s("")},handleSetNumber:function(){return O("")},handleNotif:k}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(m,{persons:t,filter:S,handleNotif:k,handleSetPersons:function(){return d.getAll().then((function(e){o(e)}))}})]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),c(e),a(e)}))};a.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),p()}},[[41,1,2]]]);
//# sourceMappingURL=main.0cb4451e.chunk.js.map